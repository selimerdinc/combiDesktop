<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: #f8fafc;
            font-family: sans-serif;
            height: 100vh;
            overflow: hidden;
        }

        .view {
            display: none;
            height: 100%;
        }

        .view.active {
            display: block;
        }
    </style>
</head>

<body class="flex">
    <aside class="w-64 bg-slate-900 text-white flex flex-col">
        <div class="p-6 border-b border-slate-800">
            <div class="text-xl font-black text-sky-400">üîß KOMBƒ∞ PRO</div>
            <div id="current-user" class="text-xs text-slate-400 mt-1">üë§ Y√ºkleniyor...</div>
        </div>
        <nav class="flex-1 p-4 space-y-2">
            <div onclick="ui.show('list')"
                class="p-3 rounded-xl hover:bg-slate-800 cursor-pointer flex items-center gap-3">üë• M√º≈üteriler</div>
            <div onclick="ui.show('add')"
                class="p-3 rounded-xl hover:bg-slate-800 cursor-pointer flex items-center gap-3">‚ûï Yeni Kayƒ±t</div>
            <div onclick="ui.show('reminders')"
                class="p-3 rounded-xl hover:bg-slate-800 cursor-pointer flex items-center gap-3">üîî Hatƒ±rlatƒ±cƒ±lar</div>
            <div onclick="ui.show('finance')"
                class="p-3 rounded-xl hover:bg-slate-800 cursor-pointer flex items-center gap-3">üìä Aylƒ±k Gelir</div>
            <div onclick="ui.show('reminders'); ui.switchTab('debt')"
                class="p-3 rounded-xl hover:bg-slate-800 cursor-pointer flex items-center gap-3">üí∏ Alacaklar</div>
            <div onclick="ui.show('users')"
                class="p-3 rounded-xl hover:bg-slate-800 cursor-pointer flex items-center gap-3">üë§ Kullanƒ±cƒ±lar</div>
            <div class="pt-4 border-t border-slate-800"><button onclick="document.getElementById('xl').click()"
                    class="w-full bg-emerald-600 p-3 rounded-xl font-bold">üì• Excel Aktar</button></div>
            <input type="file" id="xl" class="hidden" onchange="ui.upload(this)">
            <div class="pt-2 flex gap-2">
                <a href="/api/backup/download"
                    class="flex-1 bg-blue-600 p-3 rounded-xl font-bold text-center hover:bg-blue-700 text-sm">üíæ Backup
                    ƒ∞ndir</a>
                <button onclick="ui.telegramBackup()"
                    class="flex-1 bg-sky-500 p-3 rounded-xl font-bold text-center hover:bg-sky-600 text-sm">ü§ñ
                    Telegram</button>
            </div>
            <div class="pt-2"><button onclick="ui.logout()"
                    class="w-full bg-red-600 p-3 rounded-xl font-bold hover:bg-red-700">üö™ √áƒ±kƒ±≈ü Yap</button></div>
        </nav>
    </aside>

    <main class="flex-1 overflow-y-auto p-8">
        <div class="grid grid-cols-2 gap-6 mb-8">
            <div onclick="ui.show('finance')"
                class="bg-white p-6 rounded-2xl shadow-sm border-l-4 border-sky-500 hover:shadow-md cursor-pointer transition">
                <p class="text-slate-500 text-xs font-bold uppercase tracking-wider">BU AY TOPLAM TAHSƒ∞LAT</p>
                <p id="stat-m" class="text-3xl font-black text-slate-800 mt-1">0 TL</p>
            </div>
            <div onclick="ui.show('reminders'); ui.switchTab('debt')"
                class="bg-white p-6 rounded-2xl shadow-sm border-l-4 border-amber-500 hover:shadow-md cursor-pointer transition">
                <p class="text-slate-500 text-xs font-bold uppercase tracking-wider text-amber-600">BEKLEYEN TOPLAM
                    ALACAK</p>
                <p id="stat-r" class="text-3xl font-black text-amber-600 mt-1">0 TL</p>
            </div>
        </div>

        <section id="v-list" class="view active">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">M√º≈üteri Listesi</h2>
                <input type="text" id="q" onkeyup="ui.load()" placeholder="Ara (ƒ∞sim, Tel)..."
                    class="border p-3 rounded-xl w-80 outline-none shadow-sm focus:ring-2 focus:ring-sky-500">
            </div>
            <div class="bg-white rounded-2xl border overflow-hidden">
                <table class="w-full text-left">
                    <thead class="bg-slate-50 border-b">
                        <tr>
                            <th class="p-4">M√º≈üteri</th>
                            <th class="p-4">ƒ∞leti≈üim</th>
                            <th class="p-4">B√∂lge</th>
                            <th class="p-4 text-right">Eylem</th>
                        </tr>
                    </thead>
                    <tbody id="l-b" class="divide-y"></tbody>
                </table>
            </div>
        </section>

        <section id="v-det" class="view">
            <div class="flex justify-between items-center mb-6">
                <h2 id="d-title" class="text-2xl font-bold text-blue-800">M√º≈üteri Profili</h2><button
                    onclick="ui.show('list')" class="text-slate-400 font-bold hover:text-slate-600 transition">‚Üê
                    Geri</button>
            </div>
            <div class="bg-blue-50 p-6 rounded-2xl mb-6 grid grid-cols-3 gap-4 border border-blue-100">
                <div><label class="text-[10px] font-black text-blue-400 uppercase">Telefon</label>
                    <p id="d-phone" class="font-bold text-slate-700"></p>
                </div>
                <div><label class="text-[10px] font-black text-blue-400 uppercase">B√∂lge</label>
                    <p id="d-district" class="font-bold text-slate-700"></p>
                </div>
                <div><label class="text-[10px] font-black text-blue-400 uppercase">Kombi Markasƒ±</label>
                    <p id="d-brand" class="font-bold text-slate-700"></p>
                </div>
                <div class="col-span-3"><label class="text-[10px] font-black text-blue-400 uppercase">Adres</label>
                    <p id="d-address" class="text-slate-600"></p>
                </div>
            </div>
            <div class="flex gap-2 mb-6">
                <button
                    onclick="ui.openWhatsapp(document.getElementById('d-phone').innerText, 'genel', document.getElementById('d-title').innerText)"
                    class="bg-green-500 text-white px-4 py-2 rounded-lg font-bold hover:bg-green-600">WhatsApp</button>
                <button onclick="ui.editMode()" class="bg-blue-600 text-white px-4 py-2 rounded-lg font-bold">Bilgileri
                    D√ºzenle</button>
                <button onclick="ui.deleteCust()"
                    class="bg-red-50 text-red-600 px-4 py-2 rounded-lg font-bold">M√º≈üteriyi Sil</button>
            </div>
            <div class="bg-white rounded-2xl border overflow-hidden shadow-sm">
                <table class="w-full text-left">
                    <thead class="bg-slate-50 border-b">
                        <tr>
                            <th class="p-4">Tarih</th>
                            <th class="p-4">Cihaz Modeli</th>
                            <th class="p-4">Yapƒ±lan ƒ∞≈ü</th>
                            <th class="p-4">√ñdenen/Toplam</th>
                            <th class="p-4 text-right">Durum</th>
                        </tr>
                    </thead>
                    <tbody id="d-b" class="divide-y"></tbody>
                </table>
            </div>
        </section>

        <section id="v-edit" class="view">
            <div class="max-w-xl bg-white p-8 rounded-3xl border mx-auto shadow-lg">
                <h2 class="text-2xl font-black mb-6 text-blue-600">Bilgileri G√ºncelle</h2>
                <form onsubmit="ui.updateCust(event)" class="space-y-4">
                    <div><label class="text-xs font-bold">AD SOYAD</label><input type="text" name="name" id="edit-name"
                            required class="w-full border p-3 rounded-xl mt-1"></div>
                    <div><label class="text-xs font-bold">TELEFON (En az 10 haneli)</label><input type="text"
                            name="phone" id="edit-phone" required class="w-full border p-3 rounded-xl mt-1"></div>
                    <div><label class="text-xs font-bold">SEMT</label><input type="text" name="district"
                            id="edit-district" class="w-full border p-3 rounded-xl mt-1"></div>
                    <div><label class="text-xs font-bold">ADRES</label><textarea name="address" id="edit-address"
                            class="w-full border p-3 rounded-xl mt-1 h-24"></textarea></div>
                    <div class="flex gap-3 pt-4"><button type="submit"
                            class="flex-1 bg-blue-600 text-white p-4 rounded-xl font-bold">KAYDET</button><button
                            type="button" onclick="ui.show('det')"
                            class="bg-slate-100 text-slate-500 px-6 rounded-xl font-bold">ƒ∞PTAL</button></div>
                </form>
            </div>
        </section>

        <section id="v-finance" class="view">
            <h2 class="text-2xl font-bold mb-6">üìä Aylƒ±k Gelir</h2>
            <div class="bg-white rounded-2xl border overflow-hidden">
                <table class="w-full text-left">
                    <thead class="bg-slate-50 border-b">
                        <tr>
                            <th class="p-4">D√∂nem</th>
                            <th class="p-4">Tahsilat</th>
                        </tr>
                    </thead>
                    <tbody id="f-b" class="divide-y"></tbody>
                </table>
            </div>
        </section>

        <section id="v-reminders" class="view">
            <div class="flex gap-4 mb-6 border-b pb-1">
                <button onclick="ui.switchTab('main')" id="tab-btn-main"
                    class="px-6 py-2 font-black text-lg border-b-4 border-sky-500 text-sky-600 transition">üîî Bakƒ±m
                    Hatƒ±rlatmalarƒ±</button>
                <button onclick="ui.switchTab('debt')" id="tab-btn-debt"
                    class="hidden px-6 py-2 font-black text-lg border-b-4 border-transparent text-slate-400 hover:text-amber-600 transition">üí∏
                    Alacaklar</button>
            </div>

            <div id="tab-content-main">
                <div class="bg-white rounded-2xl border overflow-hidden">
                    <table class="w-full text-left">
                        <thead class="bg-slate-50 border-b">
                            <tr>
                                <th class="p-4">M√º≈üteri</th>
                                <th class="p-4">Telefon</th>
                                <th class="p-4">Tarih</th>
                                <th class="p-4 text-right">Durum</th>
                            </tr>
                        </thead>
                        <tbody id="r-b" class="divide-y"></tbody>
                    </table>
                </div>
            </div>

            <div id="tab-content-debt" class="hidden">
                <div class="bg-white rounded-2xl border overflow-hidden">
                    <table class="w-full text-left">
                        <thead class="bg-red-50 border-b border-red-100">
                            <tr>
                                <th class="p-4">M√º≈üteri</th>
                                <th class="p-4">Bor√ß</th>
                                <th class="p-4 text-right">Eylem</th>
                            </tr>
                        </thead>
                        <tbody id="u-b" class="divide-y"></tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="v-users" class="view">
            <h2 class="text-2xl font-bold mb-6">üë§ Kullanƒ±cƒ± Y√∂netimi</h2>

            <!-- Kullanƒ±cƒ± Listesi -->
            <div class="bg-white rounded-2xl border mb-6 overflow-hidden">
                <div class="bg-slate-50 p-4 border-b">
                    <h3 class="font-bold text-slate-700">üìã Mevcut Kullanƒ±cƒ±lar</h3>
                </div>
                <table class="w-full text-left">
                    <thead class="bg-slate-50 border-b">
                        <tr>
                            <th class="p-4">Kullanƒ±cƒ± Adƒ±</th>
                            <th class="p-4">Ad Soyad</th>
                            <th class="p-4">Kayƒ±t Tarihi</th>
                            <th class="p-4 text-right">Eylem</th>
                        </tr>
                    </thead>
                    <tbody id="users-list" class="divide-y"></tbody>
                </table>
            </div>

            <div class="grid grid-cols-2 gap-8">
                <div class="bg-white p-8 rounded-2xl border">
                    <h3 class="text-lg font-bold text-slate-700 mb-4">‚ûï Yeni Kullanƒ±cƒ± Ekle</h3>
                    <form onsubmit="ui.createUser(event)" class="space-y-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1">KULLANICI ADI</label>
                            <input type="text" id="new-username" placeholder="ornek" required
                                class="w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-sky-500">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1">AD SOYAD</label>
                            <input type="text" id="new-name" placeholder="Ahmet Yƒ±lmaz"
                                class="w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-sky-500">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1">≈ûƒ∞FRE (min 6 karakter)</label>
                            <input type="password" id="new-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required minlength="6"
                                class="w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-sky-500">
                        </div>
                        <button type="submit"
                            class="w-full bg-sky-600 text-white p-4 rounded-xl font-bold hover:bg-sky-700">KULLANICI
                            OLU≈ûTUR</button>
                    </form>
                    <p id="user-msg" class="text-center mt-4 text-sm hidden"></p>
                </div>
                <div class="bg-amber-50 p-8 rounded-2xl border border-amber-200">
                    <h3 class="text-lg font-bold text-slate-700 mb-4">üîí ≈ûifremi Deƒüi≈ütir</h3>
                    <form onsubmit="ui.changePassword(event)" class="space-y-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1">MEVCUT ≈ûƒ∞FRE</label>
                            <input type="password" id="current-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required
                                class="w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-amber-500">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1">YENƒ∞ ≈ûƒ∞FRE (min 6
                                karakter)</label>
                            <input type="password" id="new-password-change" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required minlength="6"
                                class="w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-amber-500">
                        </div>
                        <button type="submit"
                            class="w-full bg-amber-600 text-white p-4 rounded-xl font-bold hover:bg-amber-700">≈ûƒ∞FREYƒ∞
                            G√úNCELLE</button>
                    </form>
                    <p id="password-msg" class="text-center mt-4 text-sm hidden"></p>
                </div>
            </div>
        </section>

        <section id="v-add" class="view">
            <div class="max-w-2xl bg-white p-10 rounded-3xl border mx-auto">
                <h2 class="text-2xl font-black mb-8">Yeni Servis Kaydƒ±</h2>
                <form onsubmit="ui.save(event)" class="space-y-5">
                    <div class="grid grid-cols-2 gap-5">
                        <div class="col-span-2">
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">ƒ∞≈ûLEM TARƒ∞Hƒ∞</label>
                            <input type="date" name="date" id="add-date" required
                                class="w-full border p-4 rounded-xl font-bold text-slate-700">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-5">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">AD SOYAD</label>
                            <input type="text" name="name" placeholder="M√º≈üteri Adƒ± Soyadƒ±" required
                                class="w-full border p-4 rounded-xl">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">TELEFON</label>
                            <input type="text" name="phone" placeholder="5XX..." required
                                class="w-full border p-4 rounded-xl">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-5">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">SEMT / ƒ∞L√áE</label>
                            <input type="text" name="district" placeholder="√ñrn: Sarƒ±yer"
                                class="w-full border p-4 rounded-xl">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">Cƒ∞HAZ MARKASI</label>
                            <input type="text" name="brand" placeholder="√ñrn: Bosch, Vaillant"
                                class="w-full border p-4 rounded-xl">
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">A√áIK ADRES</label>
                        <textarea name="address" placeholder="Tam adres bilgisi..."
                            class="w-full border p-4 rounded-xl h-24"></textarea>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">YAPILAN ƒ∞≈ûLEM</label>
                        <input type="text" name="job" placeholder="√ñrn: Yƒ±llƒ±k Bakƒ±m, Kart Tamiri" required
                            class="w-full border p-4 rounded-xl">
                    </div>
                    <div class="grid grid-cols-3 gap-5">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">ƒ∞≈ûLEM T√úR√ú</label>
                            <select name="type" class="w-full border p-4 rounded-xl">
                                <option>Bakƒ±m</option>
                                <option>Arƒ±za</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">TOPLAM TUTAR</label>
                            <input type="text" name="total_fee" placeholder="0.00" required
                                class="w-full border p-4 rounded-xl">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1 ml-1">ALINAN √ñDEME</label>
                            <input type="text" name="paid_fee" placeholder="0.00" required
                                class="w-full border p-4 rounded-xl">
                        </div>
                    </div>
                    <button type="submit"
                        class="w-full bg-sky-600 text-white p-5 rounded-xl font-black hover:bg-sky-700 transition">KAYDI
                        TAMAMLA</button>
                </form>
            </div>
        </section>
    </main>

    <script src="/static/app.js?v={{VERSION}}"></script>
</body>

</html>